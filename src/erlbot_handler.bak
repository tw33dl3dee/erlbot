% -*- erlang -*-

handle_chanevent({joined, Chan, Topic, Users}, #state{was_kicked = true, kicked_by = Kicker} = State) ->
	cmd({chanmsg, [suicide_greeting(State, Kicker)]}, State),
	become_op(State),
	State#state{was_kicked = false};

handle_chanevent({kicked, Chan, User, _Reason}, State) ->
	cmd({join, Chan}, State),
	State#state{was_kicked = true, kicked_by = User};

suicide_greeting(State, Kicker) when State#state.nick == Kicker -> 
	suicide_self_greeting(State, random_p:uniform());
suicide_greeting(_, Kicker) -> ["Ты мудак, " ++ Kicker].
