#!/usr/bin/env escript 
%% -*- erlang -*-
%%! -pa ebin -name rpcclient

main([Node, Action | Args]) ->
	Method = list_to_atom(Action),
	case rpc:call(list_to_atom(Node), irc_conn, Method, [irc | Args]) of
		{badrpc, Reason} ->
			io:format(standard_error, "RPC call failed: ~p~n", [Reason]);
		Res ->
			io:format("~p~n", [Res])
	end;
main(_) ->
	io:format("Usage: ~ts <node> <method> <args...>~n", [filename:basename(escript:script_name())]).
